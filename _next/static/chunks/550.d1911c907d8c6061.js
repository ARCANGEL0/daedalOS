"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[550,1583],{60550:(e,t,i)=>{i.r(t),i.d(t,{default:()=>A});var a=i(74848);let r=i(33540).Ay.div.withConfig({componentId:"sc-18f301cd-0"})(["align-items:center;background-color:#000;display:flex;height:100%;width:100%;canvas{image-rendering:pixelated;image-rendering:crisp-edges;position:absolute;top:0 !important;touch-action:none;-webkit-touch-callout:none;user-select:none;width:100%;}div,video{display:none;}.emulator-mouse-overlay{display:block;inset:0;position:absolute;}"]);var n=i(96540);let s={emulatorFunction:"dosWorker"},o=["__core-js_shared__","compiled","core","emulatorsUi","exports","WDOSBOX","worker"],l=".zip.save",d={".jsdos/dosbox.conf":"/Program Files/js-dos/dosbox.conf",".jsdos/jsdos.json":"/Program Files/js-dos/jsdos.json"},c=new Set(["Alt","ContextMenu","F1","F3","F5","F6","F7","F10","F11","F12"]);var h=i(16286),w=i(55650),u=i(41017),f=i(62104),p=i(48060),b=i(37e3),m=i(81005),g=i(48287).Buffer;let x=async(e,t)=>{let{addFileToZip:a,isFileInZip:r}=await i.e(6789,"high").then(i.bind(i,16789));return Object.entries(d).reduce(async(e,[i,n])=>{let s=await e;return s.length>0&&await r(s,i)?s:a(s,n,i,t)},Promise.resolve(e))},y=(e,t,a,r)=>{let{appendFileToTitle:s}=(0,w.A)(e),{exists:d,mkdirRecursive:c,readFile:y,updateFolder:v,writeFile:k}=(0,u.f)(),{linkElement:j,processes:{[e]:E}}=(0,f.N)(),{closing:$}=E||{},[S,A]=(0,n.useState)({}),F=(0,n.useCallback)(async(e,t,i=!1)=>{let a=`${(0,h.basename)(e)}${l}`;await d(p.Sb)||(await c(p.Sb),v((0,h.dirname)(p.Sb)));let n=(0,h.join)(p.Sb,a);if(void 0!==S[e]&&await k(n,g.from(await S[e].persist()||[]),!0)){if(t){let e=(0,h.join)(p.jv,p.Sb),i=(0,h.join)(p.jv,`${n}${p.V9}`);await d(e)||(await c(e),v((0,h.dirname)(p.Sb))),await k(i,t,!0)}v(p.Sb,a)}if(i)try{await r?.stop(),await S[e]?.exit()}catch{}},[S,r,d,c,v,k]),T=(0,n.useCallback)(async()=>{let n;let[c]=Object.keys(S);"string"==typeof c&&(await F(c),A({[t]:void 0}));let w=t?await y(t):g.from(""),u=(0,b.uQ)(t),{zipAsync:f}=await i.e(6789,"high").then(i.bind(i,16789)),v=async e=>g.from(await f({[(0,h.basename)(t)]:e})),k=async e=>(0,b.Zd)(await x(e,y)),E=".exe"===u?await v(w):w;if(".jsdos"===u)n=(0,b.Zd)(E);else try{n=await k(E)}catch{n=await k(await v(w))}let $=(0,h.join)(p.Sb,`${(0,h.basename)(t)}${l}`),T=await d($)?(0,b.Zd)(await y($)):void 0,C=await r?.run(n,T);if(C){let i=a.current?.querySelector("canvas");i instanceof HTMLCanvasElement&&(j(e,"peekElement",i),A({[t]:C}),s((0,h.basename)(t)),(0,b.E)(n),T&&(0,b.E)(T),(0,m.v)(o))}},[s,F,a,S,r,d,e,j,y,t]);return(0,n.useEffect)(()=>(!E||$||!r||t in S||T(),()=>{if($){if(t){let e=e=>{window.setTimeout(()=>F(t,e,$),p.UW.WINDOW)};(async()=>{let e=await S[t]?.screenshot();return e?(0,b.Jf)(e):void 0})().then(e).catch(e)}else r?.stop()}}),[F,$,S,r,T,E,t]),S[t]};var v=i(16602),k=i(85531),j=i(1364);let E=e=>{c.has(e.key)&&e.preventDefault()},$=({containerRef:e,id:t,loading:i,setLoading:a,url:r})=>{let{updateWindowSize:o}=(0,k.A)(t),[l,d]=(0,n.useState)(),c=(0,v.A)(),h=(0,n.useRef)(!1),{foregroundId:w}=(0,j.w)(),u=y(t,r,e,l),{closeWithTransition:m,processes:{[t]:{libs:g=[]}={}}={}}=(0,f.N)();(0,n.useEffect)(()=>{l||h.current||(h.current=!0,(0,b.aY)(g).then(()=>{if(window.emulators&&(window.emulators.pathPrefix="/Program Files/js-dos/",e.current)){let t=e.current.closest("section");t?.addEventListener("keydown",E,{capture:!0}),t?.addEventListener("keyup",E,{capture:!0}),t?.addEventListener("focus",()=>e.current?.focus(p.VD),{passive:!0}),d(window.Dos(e.current,s))}}))},[e,l,g]),(0,n.useEffect)(()=>{if(u&&i){o(u.height(),u.width());let i=u.events();i.onMessage((e,i)=>{if(i.startsWith("[LOG_EXEC]")){let[,e]=i.split("[LOG_EXEC]"),[a]=e.replace("Parsing command line: ","").split(" ");"EXIT"===a.toUpperCase()&&m(t)}}),i.onFrameSize(()=>{let t=e.current?.querySelector("canvas"),[i,a]=[(0,b.kl)(t?.style.width),(0,b.kl)(t?.style.height)],{height:r=0,width:n=0}=t?.getBoundingClientRect()||{};a&&i&&(a!==r||i!==n)&&o(a,i)}),i.onExit(()=>window.SimpleKeyboardInstances?.emulatorKeyboard?.destroy()),a(!1),c(window.JSDOS_FS,"JS-DOS")}},[m,e,u,l?.layers,t,i,c,a,o]),(0,n.useLayoutEffect)(()=>{t!==w||i||e.current?.focus(p.VD)},[e,i,w,t])};var S=i(14153);let A=({id:e})=>(0,a.jsx)(S.A,{StyledComponent:r,id:e,useHook:$})},14153:(e,t,i)=>{i.d(t,{A:()=>l});var a=i(74848),r=i(96540),n=i(51583),s=i(8218),o=i(62104);let l=(0,r.memo)(({id:e,useHook:t,StyledComponent:i,children:l})=>{let{processes:{[e]:{url:d=""}={}}}=(0,o.N)(),c=(0,r.useRef)(null),[h,w]=(0,r.useState)(!0),u=(0,r.useMemo)(()=>({contain:"strict",visibility:h?"hidden":"visible"}),[h]);return t({containerRef:c,id:e,loading:h,setLoading:w,url:d}),(0,a.jsxs)(a.Fragment,{children:[h&&(0,a.jsx)(n.default,{}),(0,a.jsx)(i,{ref:c,style:u,...(0,s.A)({id:e}),children:l})]})})},51583:(e,t,i)=>{i.r(t),i.d(t,{default:()=>a});let a=i(33540).Ay.div.withConfig({componentId:"sc-29e5eb62-0"})(['cursor:wait;height:100%;width:100%;&::before{color:#fff;content:"Working on it...";display:flex;font-size:12px;justify-content:center;mix-blend-mode:difference;padding-top:18px;}'])},16602:(e,t,i)=>{i.d(t,{A:()=>n});var a=i(96540),r=i(41017);let n=()=>{let{mountEmscriptenFs:e,unMapFs:t,updateFolder:i}=(0,r.f)(),n=(0,a.useRef)();return(0,a.useEffect)(()=>()=>{if(n.current){let e=n.current;n.current="",t(e,!0).then(()=>i("/",void 0,e)).catch(()=>{})}},[t,i]),(0,a.useCallback)(async(t,a)=>{if(!t)return;let r="";try{r=await e(t,a)}catch{}r&&(i("/",r),n.current=r)},[e,i])}},8218:(e,t,i)=>{i.d(t,{A:()=>f});var a=i(16286),r=i(96540),n=i(51780),s=i(16091),o=i(13296),l=i(41017),d=i(62104),c=i(1364),h=i(48060),w=i(37e3),u=i(96119);let f=({callback:e,directory:t=h.Bn,id:i,onDragLeave:f,onDragOver:p,updatePositions:b})=>{let{url:m}=(0,d.N)(),g=(0,u.w)(),{iconPositions:x,sortOrders:y,setIconPositions:v}=(0,c.w)(),{exists:k,mkdirRecursive:j,updateFolder:E,writeFile:$}=(0,l.f)(),S=(0,r.useCallback)(async(e,t,r)=>{if(i){if(t){let n=(0,a.join)(h.Bn,e);if(await j(h.Bn),await $(n,t,!0))return r===o.z.UPDATE_URL&&m(i,n),E(h.Bn,e),(0,a.basename)(n)}else r===o.z.UPDATE_URL&&m(i,e)}return""},[i,j,E,m,$]),{openTransferDialog:A}=(0,n.A)();return{onDragLeave:f,onDragOver:e=>{p?.(e),(0,w.CH)(e)},onDrop:r=>{if(h.jj.has((0,w.uQ)(t)))return;if(b&&r.target instanceof HTMLElement){let{files:e,text:i}=(0,s.bn)(r);if(0===e.length&&""===i)return;(async()=>{let n={x:r.clientX,y:r.clientY},s=[];if(i){try{s=JSON.parse(i)}catch{}if(!Array.isArray(s))return;let[e]=s;if(!e||e.startsWith(t)&&(0,a.basename)(e)===(0,a.relative)(t,e))return;s=s.map(e=>(0,a.basename)(e))}else e instanceof FileList?s=[...e].map(e=>e.name):s=[...e].map(e=>e.getAsFile()?.name||"").filter(Boolean);s=await Promise.all(s.map(async e=>{let i=`${t}/${e}`;if(!x[i]||!await k(i))return e;let r=0;do r+=1,i=`${t}/${(0,a.basename)(e,(0,a.extname)(e))} (${r})${(0,a.extname)(e)}`;while(x[i]&&await k(i));return(0,a.basename)(i)})),(0,w.$Y)(t,r.target,x,y,n,s,v,k)})()}let n="string"==typeof i;n&&!b&&t===h.Bn&&g.current[i]?.componentWindow?.focus(h.VD),(0,s.nX)(r,e||S,t,A,n)}}}},79808:(e,t,i)=>{i.d(t,{Ay:()=>o,EX:()=>r,Ho:()=>a,WB:()=>n,lH:()=>s});let a={bottom:!1,bottomLeft:!1,bottomRight:!1,left:!1,right:!1,top:!1,topLeft:!1,topRight:!1},r={bottom:!0,bottomLeft:!0,bottomRight:!0,left:!0,right:!0,top:!0,topLeft:!0,topRight:!0},n=30,s=166,o={cancel:".cancel",dragHandleClassName:"handle",enableUserSelectHack:!1,minHeight:`${n}px`,minWidth:`${s}px`,resizeHandleStyles:{bottom:{bottom:"-3px",cursor:"ns-resize",height:"6px"},bottomLeft:{bottom:"-3px",cursor:"nesw-resize",height:"12px",left:"-3px",width:"12px"},bottomRight:{bottom:"-3px",cursor:"nwse-resize",height:"12px",right:"-3px",width:"12px"},left:{cursor:"ew-resize",left:"-3px",width:"6px"},right:{cursor:"ew-resize",right:"-3px",width:"6px"},top:{cursor:"ns-resize",height:"6px",top:"-3px"},topLeft:{cursor:"nwse-resize",height:"12px",left:"-3px",top:"-3px",width:"12px"},topRight:{cursor:"nesw-resize",height:"12px",right:"-3px",top:"-3px",width:"12px"}}}},36864:(e,t,i)=>{i.d(t,{Gn:()=>s,Ve:()=>d,WZ:()=>c,Xc:()=>l,r_:()=>o});var a=i(79808),r=i(48060),n=i(37e3);let s=(e,t,i=[],a=0)=>{let[s]=e.split(r.QB),o=`${s}${r.QB}`,l=i.find(e=>e.startsWith(o))||"",{componentWindow:d}=t?.[l]||{},{x:c=0,y:h=0,width:w=0,height:u=0}=d?.getBoundingClientRect()||{};return!(c+a+w>(0,n.e8)()||h+a+u>(0,n.Bv)())&&(c||h)?{x:c+a,y:h+a}:void 0},o=({height:e,width:t})=>{let[i,a]=[(0,n.Bv)(),(0,n.e8)()];return{x:Math.floor(a/2-(0,n.kl)(t)/2),y:Math.floor((i-r.D5)/2-(0,n.kl)(e)/2)}},l={BOTTOM:15,LEFT:150,RIGHT:50,TOP:15},d=(e,t,i=!1)=>{let{position:a,size:r}=e||{},{x:s=0,y:o=0}=a||{},{height:d=0,width:c=0}=r||{};return i?s+l.RIGHT>t.x||s+(0,n.kl)(c)-l.LEFT<0||o+l.BOTTOM>t.y||o+l.TOP<0:s<0||o<0||s+(0,n.kl)(c)>t.x||o+(0,n.kl)(d)>t.y},c=(e,t)=>{let i=Number(e.height),s=Number(e.width),[o,l]=[(0,n.Bv)(),(0,n.e8)()],d=o-r.D5,c=Math.max(a.WB,Math.min(i,d)),h=Math.max(a.lH,Math.min(s,l));if(!t)return{height:c,width:h};let w=i===c,u=s===h;return w||u?w?u?{height:c,width:h}:{height:Math.round(c/(s/h)),width:h}:{height:c,width:Math.round(h/(i/c))}:i>s?{height:c,width:Math.round(h/(d/c))}:{height:Math.round(c/(l/h)),width:h}}},55650:(e,t,i)=>{i.d(t,{A:()=>o});var a=i(96540),r=i(62104),n=i(25573),s=i(48060);let o=e=>{let{title:t}=(0,r.N)(),[i]=e.split(s.QB),{title:o}=n.A[i]||{};return{appendFileToTitle:(0,a.useCallback)((i,a)=>{let r=i?` - ${i}${a?` ${s.g6}`:""}`:"";t(e,`${o}${r}`)},[e,o,t]),prependFileToTitle:(0,a.useCallback)((i,a,r)=>{let n=i?`${a?`${s.g6} `:""}${i}${r?" ":" - "}`:"";t(e,`${n}${o}`)},[e,o,t])}}},85531:(e,t,i)=>{i.d(t,{A:()=>l});var a=i(33540),r=i(96540),n=i(36864),s=i(62104),o=i(1364);let l=e=>{let{setWindowStates:t}=(0,o.w)(),{processes:{[e]:{lockAspectRatio:i=!1,maximized:l=!1}={}}={}}=(0,s.N)(),{sizes:{titleBar:d}}=(0,a.DP)();return{updateWindowSize:(0,r.useCallback)((a,r)=>t(t=>({...t,[e]:{...t?.[e],maximized:l,size:(0,n.WZ)({height:a+d.height,width:r},i)}})),[e,i,l,t,d.height])}}},81005:(e,t,i)=>{i.d(t,{$:()=>s,v:()=>n});let a="DEFAULT",r="__setter__",n=e=>e.forEach(e=>{if(e in window)try{delete window[e]}finally{Object.assign(window,{[e]:void 0})}}),s=(e,t,i)=>{if(setTimeout(()=>{window.sharedGlobals&&e in window.sharedGlobals&&(window.sharedGlobals[e][r]=a)},i),window.sharedGlobals=window.sharedGlobals||{},e in window.sharedGlobals)window.sharedGlobals[e][r]=t;else{let i=window[e];window.sharedGlobals[e]={[a]:i,[r]:t},Object.defineProperty(window,e,{get(){if(window.sharedGlobals&&e in window.sharedGlobals){let{stack:t=""}=Error(),i=Object.keys(window.sharedGlobals[e]).filter(e=>![a,r].includes(e)).find(e=>new RegExp(e).test(t));return window.sharedGlobals[e][i||a]}return i},set(t){window.sharedGlobals&&e in window.sharedGlobals&&(window.sharedGlobals[e][window.sharedGlobals[e][r]]=t)}})}}}}]);