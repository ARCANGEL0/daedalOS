"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1583,7343],{47343:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(74848);let i=n(33540).Ay.div.withConfig({componentId:"sc-aa74e590-0"})(["height:calc(100% - 30px) !important;width:100% !important;canvas{height:calc(100% + 12px) !important;width:100% !important;}"]);var r=n(96540),s=n(16602),l=n(62104),o=n(48060),c=n(37e3);let u=({containerRef:e,id:t,setLoading:n})=>{let{processes:{[t]:{libs:a=[]}={}}={}}=(0,l.N)(),[i,u]=(0,r.useState)(),d=(0,s.A)();(0,r.useEffect)(()=>{let t=e.current?.querySelector("canvas");t instanceof HTMLCanvasElement&&(window.Module={canvas:t,postRun:()=>{n(!1),d(window.FS,"SpaceCadet")}},u(t))},[e,d,n]),(0,r.useEffect)(()=>(i&&setTimeout(()=>{let{height:t,width:n}=e.current?.getBoundingClientRect()||{};t&&n&&(i.style.height=`${t}px`,i.style.width=`${n}px`,(0,c.aY)(a,void 0,!!window.Module.canvas))},o.UW.WINDOW),()=>{if(i&&window.Module)try{window.Module.SDL2?.audioContext.close()}catch{}}),[i,e,a])};var d=n(14153);let f=({id:e})=>(0,a.jsx)(d.A,{StyledComponent:i,id:e,useHook:u,children:(0,a.jsx)("canvas",{id:"canvas",onContextMenu:c.CH})})},14153:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(74848),i=n(96540),r=n(51583),s=n(8218),l=n(62104);let o=(0,i.memo)(({id:e,useHook:t,StyledComponent:n,children:o})=>{let{processes:{[e]:{url:c=""}={}}}=(0,l.N)(),u=(0,i.useRef)(null),[d,f]=(0,i.useState)(!0),m=(0,i.useMemo)(()=>({contain:"strict",visibility:d?"hidden":"visible"}),[d]);return t({containerRef:u,id:e,loading:d,setLoading:f,url:c}),(0,a.jsxs)(a.Fragment,{children:[d&&(0,a.jsx)(r.default,{}),(0,a.jsx)(n,{ref:u,style:m,...(0,s.A)({id:e}),children:o})]})})},51583:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});let a=n(33540).Ay.div.withConfig({componentId:"sc-29e5eb62-0"})(['cursor:wait;height:100%;width:100%;&::before{color:#fff;content:"Working on it...";display:flex;font-size:12px;justify-content:center;mix-blend-mode:difference;padding-top:18px;}'])},16602:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(96540),i=n(41017);let r=()=>{let{mountEmscriptenFs:e,unMapFs:t,updateFolder:n}=(0,i.f)(),r=(0,a.useRef)();return(0,a.useEffect)(()=>()=>{if(r.current){let e=r.current;r.current="",t(e,!0).then(()=>n("/",void 0,e)).catch(()=>{})}},[t,n]),(0,a.useCallback)(async(t,a)=>{if(!t)return;let i="";try{i=await e(t,a)}catch{}i&&(n("/",i),r.current=i)},[e,n])}},8218:(e,t,n)=>{n.d(t,{A:()=>p});var a=n(16286),i=n(96540),r=n(51780),s=n(16091),l=n(13296),o=n(41017),c=n(62104),u=n(1364),d=n(48060),f=n(37e3),m=n(96119);let p=({callback:e,directory:t=d.Bn,id:n,onDragLeave:p,onDragOver:h,updatePositions:w})=>{let{url:v}=(0,c.N)(),y=(0,m.w)(),{iconPositions:x,sortOrders:g,setIconPositions:b}=(0,u.w)(),{exists:A,mkdirRecursive:C,updateFolder:j,writeFile:E}=(0,o.f)(),$=(0,i.useCallback)(async(e,t,i)=>{if(n){if(t){let r=(0,a.join)(d.Bn,e);if(await C(d.Bn),await E(r,t,!0))return i===l.z.UPDATE_URL&&v(n,r),j(d.Bn,e),(0,a.basename)(r)}else i===l.z.UPDATE_URL&&v(n,e)}return""},[n,C,j,v,E]),{openTransferDialog:k}=(0,r.A)();return{onDragLeave:p,onDragOver:e=>{h?.(e),(0,f.CH)(e)},onDrop:i=>{if(d.jj.has((0,f.uQ)(t)))return;if(w&&i.target instanceof HTMLElement){let{files:e,text:n}=(0,s.bn)(i);if(0===e.length&&""===n)return;(async()=>{let r={x:i.clientX,y:i.clientY},s=[];if(n){try{s=JSON.parse(n)}catch{}if(!Array.isArray(s))return;let[e]=s;if(!e||e.startsWith(t)&&(0,a.basename)(e)===(0,a.relative)(t,e))return;s=s.map(e=>(0,a.basename)(e))}else e instanceof FileList?s=[...e].map(e=>e.name):s=[...e].map(e=>e.getAsFile()?.name||"").filter(Boolean);s=await Promise.all(s.map(async e=>{let n=`${t}/${e}`;if(!x[n]||!await A(n))return e;let i=0;do i+=1,n=`${t}/${(0,a.basename)(e,(0,a.extname)(e))} (${i})${(0,a.extname)(e)}`;while(x[n]&&await A(n));return(0,a.basename)(n)})),(0,f.$Y)(t,i.target,x,g,r,s,b,A)})()}let r="string"==typeof n;r&&!w&&t===d.Bn&&y.current[n]?.componentWindow?.focus(d.VD),(0,s.nX)(i,e||$,t,k,r)}}}}}]);